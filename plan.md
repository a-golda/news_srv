
Преквезиты:
- Сбор источников

Джоба скрапинга/парсинга - почти готово
- ВК, ВЕБ, добывааем сырые данные
- - Скрапер веба
- - АПИ ВК - готов!
- Складываем на их на диск
- Максимально сырые данные

Обработчик - читает сырые  - механика понятна
- Python-pandas джоба которая читает сырье, обрабатывает. скорит и тэгирует
- Стадия скоринга и тэгирования - отдельная ML-задача (здесь нужно как можно больеш изобретательности)
- Кладет результат в базу

База
- News (+ скоринг)
- Users
- Users_history

Сервис
- Добавляет нового пользователя в базу (и его анкету)
- По id пользователя выдает новость
- - Смотрит истроию запросов, исключает новости которые уже выдавались (POST)
- - ? Применяет мгякие фильтры по тэгам исходя из роли / персонализации ?
- - С весами пропорциональными скору сэмплирует 2-3 новости и отдает (GET)


Телеграм бот для фронта - делаем в последню очередь
- Анкета пользователя при регистрации
- Выдача новостей при команде /feed


В постгре все обработанное 
Ты базу обновляешь раз в день


## Детали по сервису и базе:

Таблица users
JSON TG + анкета

Таблица users_history
user_id, news_id int, dttm - дата записи в таблицу

Таблица news

Column('news_id', Integer),
Column('tag_id', Integer),
Column('source', String),
Column('role', String),
Column('url', String), - url новости из attch
Column("news_date", timestamp)
Column("keywords", Array) - 
Массив с последовательными координатами (номер символа) начала и конца разметки ключевых слов
0, 5, 7, 30 - выделить символы от 0-го до 5 и от 7 до 30
Column("key_point", Array) - массив ключевых тем
Column('date_updated', DateTime))
Column('parsed_news', String)
Column('score', float)

Методы сервиса

- POST add_user принимает JSON юзера и кладет в users
- GET get_news по user_id и сохраняет факт запроса users_history

Структура запроса get_news

1) По id пользователя чекаем news_id из user_history которые мы ему выдавали - H
2) Ставим фильтр в news_id : news_id not in (select )
3) Сортируем выдачу по score
4) Селектим топ-X (X - конфиг)
5) Отдаем результат запроса JSON-ом
6) Записываем результат в users_history

select *
from news
where news_id not in (
    select news_id from users_history where user_id = USER
)